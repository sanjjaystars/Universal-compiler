<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Carbon | Real C Compiler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs/loader.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0a0a0a; --border: #1f1f1f; }
        body { background: var(--bg); color: #e5e5e5; font-family: 'Plus Jakarta Sans', sans-serif; height: 100vh; overflow: hidden; }
        .workspace { display: grid; grid-template-columns: 1fr 400px; height: calc(100vh - 64px); background: var(--border); gap: 1px; }
        .console { background: #000; font-family: 'JetBrains Mono', monospace; font-size: 13px; padding: 20px; color: #10b981; overflow-y: auto; white-space: pre-wrap; }
        .run-btn { background: #3b82f6; color: white; padding: 8px 24px; border-radius: 99px; font-weight: 700; font-size: 12px; transition: 0.2s; }
        .run-btn:hover { background: #2563eb; transform: scale(1.05); }
        .run-btn:disabled { background: #27272a; cursor: not-allowed; }
    </style>
</head>
<body class="flex flex-col">

    <nav class="h-16 px-6 border-b border-[#1f1f1f] flex items-center justify-between bg-black">
        <span class="font-bold tracking-tighter">C_SYSTEM <span class="text-blue-500">v2.1</span></span>
        <button id="run-btn" onclick="runRemote()" class="run-btn">BUILD & RUN</button>
    </nav>

    <div class="workspace">
        <div id="editor-container"></div>
        <div id="stdout" class="console">Ready for input...</div>
    </div>

    <script>
        let editor;
        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            editor = monaco.editor.create(document.getElementById('editor-container'), {
                value: "#include <stdio.h>\n\nint main() {\n    int a = 5, b = 10;\n    printf(\"The sum is: %d\\n\", a + b);\n    return 0;\n}",
                language: 'cpp',
                theme: 'vs-dark',
                automaticLayout: true,
                fontFamily: 'JetBrains Mono',
                fontSize: 14,
                minimap: { enabled: false }
            });
        });

        async function runRemote() {
            const btn = document.getElementById('run-btn');
            const output = document.getElementById('stdout');
            const code = editor.getValue();

            btn.disabled = true;
            output.innerHTML = "Compiling on remote server...\n";

            try {
                const response = await fetch("https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=false&wait=true", {
                    method: "POST",
                    headers: {
                        "x-rapidapi-host": "judge0-ce.p.rapidapi.com",
                        "x-rapidapi-key": "YOUR_API_KEY_HERE", // Replace with your key
                        "content-type": "application/json"
                    },
                    body: JSON.stringify({
                        source_code: code,
                        language_id: 50 // ID for C (GCC 9.2.0)
                    })
                });

                const data = await response.json();
                output.innerText = data.stdout || data.stderr || data.compile_output || "Execution finished.";
            } catch (error) {
                output.innerHTML = "<span style='color: #ef4444'>Error: Ensure your API key is correct.</span>";
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>