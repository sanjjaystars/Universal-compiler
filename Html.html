<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon | Web Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs/loader.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0a;
            --sidebar: #111111;
            --border: #1f1f1f;
            --accent: #6366f1; /* Indigo accent for Web */
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            color: #e5e5e5;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Equal split for Web Dev */
            height: calc(100vh - 64px);
            background: var(--border);
            gap: 1px;
        }

        #editor { background-color: var(--bg); }

        /* Preview Window Styling */
        .preview-pane {
            background-color: #ffffff; /* Default white canvas for web preview */
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .preview-header {
            background: #18181b;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border);
        }

        #browser-frame {
            flex-grow: 1;
            width: 100%;
            height: 100%;
            background: white;
        }

        /* Top Nav Glass Effect */
        nav {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(12px);
            z-index: 50;
        }

        .btn-live {
            background: var(--accent);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.2);
            transition: all 0.2s ease;
        }
        .btn-live:hover {
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.4);
            transform: translateY(-1px);
        }

        /* Tab styling */
        .tab-active {
            border-bottom: 2px solid var(--accent);
            color: white;
        }
    </style>
</head>
<body class="flex flex-col">

    <nav class="h-16 flex items-center justify-between px-6 border-b border-[#1f1f1f]">
        <div class="flex items-center gap-6">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
                </div>
                <span class="text-sm font-bold tracking-tight">WEB_STUDIO</span>
            </div>
            
            <div class="flex gap-4 text-[11px] font-bold uppercase tracking-widest text-neutral-500">
                <span class="tab-active py-5 cursor-pointer hover:text-white transition">index.html</span>
                <span class="py-5 cursor-pointer hover:text-white transition">style.css</span>
            </div>
        </div>

        <div class="flex items-center gap-4">
            <div class="flex bg-neutral-900 rounded-lg p-1 mr-2">
                <button class="p-1.5 hover:bg-neutral-800 rounded text-neutral-400" title="Desktop View">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect width="20" height="14" x="2" y="3" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                </button>
                <button class="p-1.5 hover:bg-neutral-800 rounded text-neutral-400" title="Mobile View">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect width="14" height="20" x="5" y="2" rx="2"/><path d="M12 18h.01"/></svg>
                </button>
            </div>
            <button onclick="updatePreview()" class="btn-live px-5 py-2 rounded-full text-white text-xs font-bold uppercase tracking-wider">
                Sync Preview
            </button>
        </div>
    </nav>

    <div class="app-container">
        <div id="editor" class="relative"></div>

        <div class="preview-pane">
            <div class="preview-header">
                <div class="flex gap-1.5">
                    <div class="w-2.5 h-2.5 rounded-full bg-neutral-700"></div>
                    <div class="w-2.5 h-2.5 rounded-full bg-neutral-700"></div>
                    <div class="w-2.5 h-2.5 rounded-full bg-neutral-700"></div>
                </div>
                <div class="bg-neutral-900 px-3 py-1 rounded text-[10px] text-neutral-400 font-mono flex-grow max-w-xs overflow-hidden whitespace-nowrap">
                    localhost:3000/carbon_preview
                </div>
            </div>
            <iframe id="browser-frame" sandbox="allow-scripts"></iframe>
        </div>
    </div>

    <script>
        let editor;

        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            editor = monaco.editor.create(document.getElementById('editor'), {
                value: [
                    '<!DOCTYPE html>',
                    '<html>',
                    '<head>',
                    '  <style>',
                    '    body {',
                    '      background: radial-gradient(circle, #6366f1 0%, #4338ca 100%);',
                    '      height: 100vh;',
                    '      display: flex;',
                    '      align-items: center;',
                    '      justify-content: center;',
                    '      color: white;',
                    '      font-family: sans-serif;',
                    '      margin: 0;',
                    '    }',
                    '    .card {',
                    '      background: rgba(255,255,255,0.1);',
                    '      backdrop-filter: blur(10px);',
                    '      padding: 3rem;',
                    '      border-radius: 2rem;',
                    '      border: 1px solid rgba(255,255,255,0.2);',
                    '      text-align: center;',
                    '    }',
                    '  </style>',
                    '</head>',
                    '<body>',
                    '  <div class="card">',
                    '    <h1>Carbon Web Studio</h1>',
                    '    <p>Real-time aesthetic rendering.</p>',
                    '  </div>',
                    '</body>',
                    '</html>'
                ].join('\n'),
                language: 'html',
                theme: 'vs-dark',
                automaticLayout: true,
                fontFamily: 'JetBrains Mono',
                fontSize: 14,
                lineHeight: 1.6,
                padding: { top: 24 },
                minimap: { enabled: false },
                cursorSmoothCaretAnimation: true
            });

            // Auto-update on typing (throttled)
            let timeout;
            editor.onDidChangeModelContent(() => {
                clearTimeout(timeout);
                timeout = setTimeout(updatePreview, 500);
            });
            
            // Initial Load
            updatePreview();
        });

        function updatePreview() {
            const frame = document.getElementById('browser-frame');
            const code = editor.getValue();
            const blob = new Blob([code], { type: 'text/html' });
            frame.src = URL.createObjectURL(blob);
        }
    </script>
</body>
</html>